<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tutor Dashboard (Color/Emoji, Filter+Sort, Tutor Approval)</title>
  <style>
    /* ===== Dark Theme & Layout ===== */
    body {
      margin: 0;
      background: #1F222A;
      color: #EAEAEA;
      font-family: "Segoe UI", Tahoma, Arial, sans-serif;
      line-height: 1.4;
    }
    header {
      background: #1A1C23;
      border-bottom: 1px solid #2D3138;
      padding: 1rem 2rem;
    }
    header h1 {
      font-size: 1.2rem;
      margin: 0;
      display: inline-block;
      font-weight: 600;
    }

    .container {
      display: flex;
      min-height: calc(100vh - 60px);
    }

    /* ===== LEFT SIDEBAR (filter & sort) ===== */
    .sidebar {
      flex: 0 0 250px;
      border-right: 1px solid #2D3138;
      padding: 1rem;
      background: #23262F;
    }
    .sidebar h2 {
      font-size: 1rem;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }
    .filter-section {
      margin-bottom: 1.5rem;
    }
    .filter-section label {
      display: block;
      font-size: 0.9rem;
      margin-bottom: 0.3rem;
      font-weight: 500;
    }
    .filter-section select,
    .filter-section input[type="checkbox"] {
      background: #2D3138;
      border: 1px solid #3A3F45;
      border-radius: 4px;
      color: #EAEAEA;
      padding: 0.4rem;
      margin-bottom: 0.5rem;
      width: 100%;
      font-size: 0.85rem;
    }
    /* The checkbox might need separate styling if desired */
    .filter-section input[type="checkbox"] {
      width: auto;
      margin-right: 0.3rem;
      vertical-align: middle;
    }
    .filter-section span {
      font-size: 0.85rem;
      vertical-align: middle;
    }

    /* ===== MAIN CONTENT: UGC LIST ===== */
    .main-content {
      flex: 1;
      padding: 1rem 2rem;
      overflow-y: auto;
    }
    .main-content h2 {
      font-size: 1rem;
      margin: 1rem 0 0.5rem 0;
      font-weight: 600;
      border-bottom: 1px solid #2D3138;
      padding-bottom: 0.3rem;
    }

    .ugc-item {
      background: #2A2F35;
      border: 1px solid #3A3F45;
      border-radius: 6px;
      margin-bottom: 1rem;
      padding: 1rem;
      position: relative;
    }
    .ugc-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 0.5rem;
    }
    .ugc-header h3 {
      font-size: 1rem;
      margin: 0;
      font-weight: 600;
      text-transform: uppercase;
    }
    .tutor-approved-label {
      background: #FFC107;
      color: #333;
      font-size: 0.7rem;
      font-weight: 700;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      margin-left: 0.5rem;
    }
    .ugc-meta {
      font-size: 0.85rem;
      opacity: 0.8;
      margin-bottom: 0.5rem;
    }

    /* Up/Down Vote Badges */
    .vote-badge {
      display: inline-block;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      margin-right: 0.4rem;
      font-size: 0.8rem;
      font-weight: 600;
      vertical-align: middle;
    }
    .vote-badge.up {
      background-color: #2F8C36; /* greenish */
      color: #fff;
    }
    .vote-badge.down {
      background-color: #C43232; /* redish */
      color: #fff;
    }

    .actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
    .actions button {
      cursor: pointer;
      background: #3A3F45;
      border: 1px solid #4A4F55;
      color: #EAEAEA;
      border-radius: 4px;
      padding: 0.4rem 0.8rem;
      font-size: 0.85rem;
      transition: background 0.2s;
    }
    .actions button:hover {
      background: #4A4F55;
    }

    /* Edit form hidden by default */
    .edit-form {
      background: #23262F;
      border: 1px solid #2D3138;
      border-radius: 6px;
      padding: 0.5rem;
      margin-top: 0.5rem;
      display: none;
    }
    .edit-form label {
      display: block;
      margin-top: 0.5rem;
      font-size: 0.85rem;
    }
    .edit-form textarea {
      width: 100%;
      height: 60px;
      background: #2D3138;
      color: #EAEAEA;
      border: 1px solid #3A3F45;
      border-radius: 4px;
      padding: 0.4rem;
      margin-top: 0.3rem;
      resize: vertical;
    }
    .edit-form .save-btn {
      margin-top: 0.5rem;
      font-weight: 600;
      text-transform: uppercase;
      background: #4A8F4F; /* greenish */
    }
    .edit-form .save-btn:hover {
      background: #5FAF5F;
    }
  </style>
</head>
<body>

<header>
  <h1>Syntea Expert Tool</h1>
</header>

<div class="container">
  <!-- LEFT SIDEBAR: FILTERS -->
  <div class="sidebar">
    <h2>Filter / Sort</h2>
    <div class="filter-section">
      <label for="sectionSelect">By Section:</label>
      <select id="sectionSelect">
        <option value="">All Sections</option>
        <option value="1.1">Section 1.1</option>
        <option value="1.2">Section 1.2</option>
        <option value="2.1">Section 2.1</option>
        <option value="2.2">Section 2.2</option>
        <option value="2.3">Section 2.3</option>
        <option value="3.1">Section 3.1</option>
        <option value="3.2">Section 3.2</option>
      </select>
    </div>

    <div class="filter-section">
      <input type="checkbox" id="sortUpvotesChk">
      <span>Sort by Upvotes (Desc)</span>
    </div>
  </div>

  <!-- MAIN CONTENT: RENDERED UGC -->
  <div class="main-content" id="ugcContainer"></div>
</div>

<script>
  /* ===========================
     1) MOCK DATA (Many Examples)
     =========================== */

  // We'll also color-code each type with emojis, similarly to your other prototype:
  const ASSET_STYLES = {
    Podcast:    { bg: '#4A768E', emoji: '🎧 ' },
    Flashcards: { bg: '#865B2F', emoji: '🗂 ' },
    Explain:    { bg: '#4F6B8F', emoji: '🧐 ' },
    Example:    { bg: '#5A8F4F', emoji: '🤔 ' }
  };

  const mockUGC = [
    {
      id: "pod001",
      section: "1.1",
      type: "Podcast",
      title: "Intro Podcast Episode",
      upvotes: 12,
      downvotes: 2,
      tutorApproved: false,
      transcript: "Short transcript for the intro podcast..."
    },
    {
      id: "exp002",
      section: "1.1",
      type: "Explain",
      title: "Basic Explanation of Terms",
      upvotes: 5,
      downvotes: 1,
      tutorApproved: true,
      content: "A simple explanation about the main concept."
    },
    {
      id: "flash003",
      section: "1.2",
      type: "Flashcards",
      title: "Key Terms - Flashcards",
      upvotes: 20,
      downvotes: 4,
      tutorApproved: false,
      content: "Term: Something, Definition: Something else..."
    },
    {
      id: "pod004",
      section: "2.1",
      type: "Podcast",
      title: "Deep Dive Episode",
      upvotes: 3,
      downvotes: 5,
      tutorApproved: false,
      transcript: "A more detailed transcript about deeper topics..."
    },
    {
      id: "exp005",
      section: "2.1",
      type: "Example",
      title: "Real-World IoT Scenario",
      upvotes: 15,
      downvotes: 0,
      tutorApproved: false,
      content: "An example usage scenario in a remote environment."
    },
    {
      id: "exp006",
      section: "2.2",
      type: "Explain",
      title: "Advanced Explanation on Routing",
      upvotes: 8,
      downvotes: 2,
      tutorApproved: false,
      content: "Describing how routing works in a constrained environment..."
    },
    {
      id: "pod007",
      section: "2.2",
      type: "Podcast",
      title: "Q&A Session with Experts",
      upvotes: 25,
      downvotes: 1,
      tutorApproved: true,
      transcript: "Q: ... A: ... Q: ... A: ... [some Q&A content]"
    },
    {
      id: "flash008",
      section: "2.3",
      type: "Flashcards",
      title: "Advanced Terms - Flashcards",
      upvotes: 2,
      downvotes: 10,
      tutorApproved: false,
      content: "Term: Advanced concept, Definition: Detailed explanation..."
    },
    {
      id: "exp009",
      section: "3.1",
      type: "Example",
      title: "Complex Network Example",
      upvotes: 9,
      downvotes: 9,
      tutorApproved: false,
      content: "An example of a multi-hop network scenario..."
    },
    {
      id: "pod010",
      section: "3.1",
      type: "Podcast",
      title: "Connectivity Challenges Roundtable",
      upvotes: 30,
      downvotes: 5,
      tutorApproved: false,
      transcript: "A roundtable discussion with three experts on connectivity issues..."
    },
    {
      id: "flash011",
      section: "3.2",
      type: "Flashcards",
      title: "Deployment Flashcards",
      upvotes: 0,
      downvotes: 0,
      tutorApproved: false,
      content: "Card set focusing on how to deploy sensors in the field..."
    },
    {
      id: "exp012",
      section: "3.2",
      type: "Explain",
      title: "Clarifying Security Requirements",
      upvotes: 18,
      downvotes: 2,
      tutorApproved: true,
      content: "A thorough explanation on IoT security basics..."
    },
  ];

  /* ===========================
     2) FILTER & SORT REFS
     =========================== */
  const sectionSelect    = document.getElementById('sectionSelect');
  const sortUpvotesChk   = document.getElementById('sortUpvotesChk');
  const ugcContainer     = document.getElementById('ugcContainer');

  /* ===========================
     3) RENDERING LOGIC
     =========================== */
  function renderAll() {
    ugcContainer.innerHTML = '';

    const sectionVal = sectionSelect.value;
    const sortByUp   = sortUpvotesChk.checked;

    // 1) Filter by section
    let filtered = mockUGC;
    if (sectionVal) {
      filtered = filtered.filter(item => item.section === sectionVal);
    }

    // 2) If "Sort by Upvotes" is checked => descending by upvotes
    if (sortByUp) {
      filtered = [...filtered].sort((a,b) => b.upvotes - a.upvotes);
    } else {
      // no sorting
      filtered = [...filtered];
    }

    // 3) Group by section
    const sectionsMap = {};
    filtered.forEach(item => {
      if (!sectionsMap[item.section]) {
        sectionsMap[item.section] = [];
      }
      sectionsMap[item.section].push(item);
    });

    // 4) Render each section in ascending order (like 1.1, 1.2, 2.1, etc.)
    Object.keys(sectionsMap).sort().forEach(sec => {
      const h2 = document.createElement('h2');
      h2.textContent = `Section ${sec}`;
      ugcContainer.appendChild(h2);

      sectionsMap[sec].forEach(item => {
        const block = createUGCBlock(item);
        ugcContainer.appendChild(block);
      });
    });
  }

  function createUGCBlock(item) {
    /* A "UGC block" is a card showing type, title, up/down votes, 
       tutor-approved, snippet of content, plus actions. */

    const div = document.createElement('div');
    div.className = 'ugc-item';

    // Header row: "Type Title" + "Tutor Approved?" label if needed
    const header = document.createElement('div');
    header.className = 'ugc-header';

    const h3 = document.createElement('h3');

    // Color-coded emoji for the type
    const styleInfo = ASSET_STYLES[item.type] || {};
    const emoji     = styleInfo.emoji || '';
    h3.textContent  = `${emoji}${item.type}: ${item.title}`;
    header.appendChild(h3);

    if (item.tutorApproved) {
      const label = document.createElement('span');
      label.className = 'tutor-approved-label';
      label.textContent = 'Tutor Approved';
      header.appendChild(label);
    }

    div.appendChild(header);

    // Up/Down votes with color badges
    const meta = document.createElement('div');
    meta.className = 'ugc-meta';

    const upBadge = document.createElement('span');
    upBadge.className = 'vote-badge up';
    upBadge.textContent = `+${item.upvotes}`;

    const downBadge = document.createElement('span');
    downBadge.className = 'vote-badge down';
    downBadge.textContent = `-${item.downvotes}`;

    meta.appendChild(upBadge);
    meta.appendChild(downBadge);

    div.appendChild(meta);

    // Snippet: either "transcript" or "content" depending on type
    const snippet = document.createElement('div');
    snippet.style.fontSize = '0.85rem';
    snippet.style.opacity  = '0.9';

    let textToShow = '';
    if (item.type === 'Podcast') {
      textToShow = `Transcript: ${truncateText(item.transcript, 80)}`;
    } else if (item.type === 'Explain' || item.type === 'Example' || item.type === 'Flashcards') {
      textToShow = item.content ? truncateText(item.content, 80) : '(No content)';
    }
    snippet.textContent = textToShow;
    div.appendChild(snippet);

    // Action buttons
    const actions = document.createElement('div');
    actions.className = 'actions';

    // Edit
    const editBtn = document.createElement('button');
    editBtn.textContent = 'Edit';
    editBtn.addEventListener('click', () => {
      toggleEditForm(div, item);
    });
    actions.appendChild(editBtn);

    // Tutor Approve
    const approveBtn = document.createElement('button');
    approveBtn.textContent = item.tutorApproved ? 'Remove Approval' : 'Mark Approved';
    approveBtn.addEventListener('click', () => {
      item.tutorApproved = !item.tutorApproved;
      renderAll();
    });
    actions.appendChild(approveBtn);

    div.appendChild(actions);

    // Edit form (hidden by default)
    const editForm = document.createElement('div');
    editForm.className = 'edit-form';

    if (item.type === 'Podcast') {
      // transcript
      const lbl = document.createElement('label');
      lbl.textContent = 'Transcript:';
      editForm.appendChild(lbl);

      const txtarea = document.createElement('textarea');
      txtarea.value = item.transcript;
      editForm.appendChild(txtarea);

      const saveBtn = document.createElement('button');
      saveBtn.className = 'save-btn';
      saveBtn.textContent = 'Save';
      saveBtn.addEventListener('click', () => {
        item.transcript = txtarea.value;
        renderAll();
      });
      editForm.appendChild(saveBtn);
    } else {
      // content
      const lbl = document.createElement('label');
      lbl.textContent = 'Content:';
      editForm.appendChild(lbl);

      const txtarea = document.createElement('textarea');
      if (item.content) {
        txtarea.value = item.content;
      }
      editForm.appendChild(txtarea);

      const saveBtn = document.createElement('button');
      saveBtn.className = 'save-btn';
      saveBtn.textContent = 'Save';
      saveBtn.addEventListener('click', () => {
        item.content = txtarea.value;
        renderAll();
      });
      editForm.appendChild(saveBtn);
    }

    div.appendChild(editForm);

    return div;
  }

  // Utility: truncate text
  function truncateText(txt, maxLen) {
    if (!txt) return '';
    if (txt.length <= maxLen) return txt;
    return txt.slice(0, maxLen) + '...';
  }

  function toggleEditForm(ugcDiv, item) {
    const form = ugcDiv.querySelector('.edit-form');
    form.style.display = (form.style.display === 'block') ? 'none' : 'block';
  }

  /* ===========================
     4) EVENT HANDLERS
     =========================== */
  sectionSelect.addEventListener('change', renderAll);
  sortUpvotesChk.addEventListener('change', renderAll);

  /* ===========================
     5) INITIAL RENDER
     =========================== */
  renderAll();
</script>
</body>
</html>

